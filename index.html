<!doctype html>
<html>
  <head>
    <title>DevOps Live Status Dashboard</title>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <style>
      body {
        background: #0f172a;
        color: white;
        font-family: Arial;
        text-align: center;
      }

      .container {
        width: 600px;
        margin: auto;
      }

      canvas {
        background: #1e293b;
        padding: 20px;
        border-radius: 10px;
      }

      .status {
        margin-top: 20px;
        font-size: 18px;
        color: #22c55e;
      }
    </style>
  </head>

  <body>
    <h1>ðŸš¦ DevOps CI/CD Live Dashboard</h1>

    <div class="container">
      <canvas id="pipelineChart"></canvas>
      <div class="status" id="deployStatus"></div>
    </div>

    <script>
      fetch("status.json")
        .then((res) => res.json())
        .then((data) => {
          document.getElementById("deployStatus").innerText =
            "Deployment Status: " +
            data.deployment_status +
            " | Git Pushes: " +
            data.git_pushes;

          new Chart(document.getElementById("pipelineChart"), {
            type: "bar",
            data: {
              labels: ["Git Pushes", "CI Success", "CI Failed"],
              datasets: [
                {
                  label: "Pipeline Metrics",
                  data: [data.git_pushes, data.ci_success, data.ci_failed],
                },
              ],
            },
            options: {
              scales: {
                y: { beginAtZero: true },
              },
            },
          });
        });
    </script>
  </body>
</html>
